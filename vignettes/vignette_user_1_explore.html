<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Kenneth McLean" />

<meta name="date" content="2018-08-24" />

<title>Redcap User Management: 1. Explore Current Users</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">Redcap User Management: 1. Explore Current Users</h1>
<h4 class="author"><em>Kenneth McLean</em></h4>
<h4 class="date"><em>2018-08-24</em></h4>



<p>Management of user rights in REDCap becomes increasingly laborious as the scale of the research project expands (e.g. with the number of users, and the number of data access groups).</p>
<p>However, while “role name” is an incredibly useful user management tool within REDCap, this is not currently exportable alongside user rights using the REDCap API. The following functions provide methods to count / explore / apply user roles to exported REDCap user rights of a project.</p>
<div id="exploration-of-current-users" class="section level1">
<h1>Exploration of current users</h1>
<div id="user_roles_n" class="section level2">
<h2>1. user_roles_n()</h2>
<p>Use <code>user_roles_n()</code> to count the number of unique user “roles” within the REDcap Project (e.g. the number of unique combinations of user rights).</p>
<p>There are 3 outputs from <code>user_roles_n()</code>:</p>
<ol style="list-style-type: decimal">
<li><p>A string stating “There are n unique roles in this redcap project”.</p></li>
<li><p>A nested dataframe of:</p></li>
</ol>
<p>a). $full: A dataframe of all user rights of the redcap project (with an additional column called “role” which numbers users 1:n according to their unique role).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Example output from user_roles_n()</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">user_roles_n_full &lt;-<span class="st"> </span>collaborator<span class="op">::</span>example_user_roles_n_full <span class="co"># please note all names are randomly generated</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">knitr<span class="op">::</span><span class="kw">kable</span>(user_roles_n_full)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">role</th>
<th align="left">username</th>
<th align="left">email</th>
<th align="left">firstname</th>
<th align="left">lastname</th>
<th align="left">expiration</th>
<th align="left">data_access_group</th>
<th align="right">data_access_group_id</th>
<th align="right">design</th>
<th align="right">user_rights</th>
<th align="right">data_access_groups</th>
<th align="right">data_export</th>
<th align="right">reports</th>
<th align="right">stats_and_charts</th>
<th align="right">manage_survey_participants</th>
<th align="right">calendar</th>
<th align="right">data_import_tool</th>
<th align="right">data_comparison_tool</th>
<th align="right">logging</th>
<th align="right">file_repository</th>
<th align="right">data_quality_create</th>
<th align="right">data_quality_execute</th>
<th align="right">api_export</th>
<th align="right">api_import</th>
<th align="right">mobile_app</th>
<th align="right">mobile_app_download_data</th>
<th align="right">record_create</th>
<th align="right">record_rename</th>
<th align="right">record_delete</th>
<th align="right">lock_records_all_forms</th>
<th align="right">lock_records</th>
<th align="right">lock_records_customization</th>
<th align="left">forms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">f_almond</td>
<td align="left"><a href="mailto:f_almond@email.com">f_almond@email.com</a></td>
<td align="left">Fleur</td>
<td align="left">Almond</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">y_andersen</td>
<td align="left"><a href="mailto:y_andersen@email.com">y_andersen@email.com</a></td>
<td align="left">Yaseen</td>
<td align="left">Andersen</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:1</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">k_ashton</td>
<td align="left"><a href="mailto:k_ashton@email.com">k_ashton@email.com</a></td>
<td align="left">Kester</td>
<td align="left">Ashton</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">c_avila</td>
<td align="left"><a href="mailto:c_avila@email.com">c_avila@email.com</a></td>
<td align="left">Chanice</td>
<td align="left">Avila</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:1</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">s_ayala</td>
<td align="left"><a href="mailto:s_ayala@email.com">s_ayala@email.com</a></td>
<td align="left">Samiha</td>
<td align="left">Ayala</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:1</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">a_barker</td>
<td align="left"><a href="mailto:a_barker@email.com">a_barker@email.com</a></td>
<td align="left">Aleesha</td>
<td align="left">Barker</td>
<td align="left">NA</td>
<td align="left">hospital_A</td>
<td align="right">1001</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:0</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">s_beech</td>
<td align="left"><a href="mailto:s_beech@email.com">s_beech@email.com</a></td>
<td align="left">Shanelle</td>
<td align="left">Beech</td>
<td align="left">NA</td>
<td align="left">hospital_B</td>
<td align="right">1002</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:0</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">h_berry</td>
<td align="left"><a href="mailto:h_berry@email.com">h_berry@email.com</a></td>
<td align="left">Hailie</td>
<td align="left">Berry</td>
<td align="left">NA</td>
<td align="left">hospital_B</td>
<td align="right">1002</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:0</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">a_bowen</td>
<td align="left"><a href="mailto:a_bowen@email.com">a_bowen@email.com</a></td>
<td align="left">Alyssa</td>
<td align="left">Bowen</td>
<td align="left">NA</td>
<td align="left">hospital_C</td>
<td align="right">1003</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:0</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">r_bradford</td>
<td align="left"><a href="mailto:r_bradford@email.com">r_bradford@email.com</a></td>
<td align="left">Ralph</td>
<td align="left">Bradford</td>
<td align="left">NA</td>
<td align="left">hospital_C</td>
<td align="right">1003</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:0</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">y_cameron</td>
<td align="left"><a href="mailto:y_cameron@email.com">y_cameron@email.com</a></td>
<td align="left">Yara</td>
<td align="left">Cameron</td>
<td align="left">NA</td>
<td align="left">hospital_D</td>
<td align="right">1004</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:0</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">m_cantrell</td>
<td align="left"><a href="mailto:m_cantrell@email.com">m_cantrell@email.com</a></td>
<td align="left">Meg</td>
<td align="left">Cantrell</td>
<td align="left">NA</td>
<td align="left">hospital_D</td>
<td align="right">1004</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:1,admission_details:1,follow_up:1,validation:0</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">a_carlson</td>
<td align="left"><a href="mailto:a_carlson@email.com">a_carlson@email.com</a></td>
<td align="left">Ayomide</td>
<td align="left">Carlson</td>
<td align="left">NA</td>
<td align="left">hospital_A</td>
<td align="right">1001</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:0,admission_details:0,follow_up:0,validation:1</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">m_carrillo</td>
<td align="left"><a href="mailto:m_carrillo@email.com">m_carrillo@email.com</a></td>
<td align="left">Martha</td>
<td align="left">Carrillo</td>
<td align="left">NA</td>
<td align="left">hospital_B</td>
<td align="right">1002</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:0,admission_details:0,follow_up:0,validation:1</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">l_cervantes</td>
<td align="left"><a href="mailto:l_cervantes@email.com">l_cervantes@email.com</a></td>
<td align="left">Leroy</td>
<td align="left">Cervantes</td>
<td align="left">NA</td>
<td align="left">hospital_D</td>
<td align="right">1004</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">patient_demographics:0,admission_details:0,follow_up:0,validation:1</td>
</tr>
</tbody>
</table>
<p>b). $examples: A dataframe of each role (1:n) and an example username with those rights (can be used as input for the <code>user_roles()</code> function).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">user_roles_n_eg &lt;-<span class="st"> </span>collaborator<span class="op">::</span>example_user_roles_n_eg</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">knitr<span class="op">::</span><span class="kw">kable</span>(user_roles_n_eg)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">role</th>
<th align="left">username</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">f_almond</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">k_ashton</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">a_barker</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">a_carlson</td>
</tr>
</tbody>
</table>
</div>
<div id="user_roles" class="section level2">
<h2>2. user_roles()</h2>
<div id="set-up-input-role_users_example-dataframe" class="section level3">
<h3>Set-up input <code>role_users_example</code> dataframe</h3>
<p>This can be created de novo, or the <code>user_roles_n()</code> $example output can be used. It is recommended that user-friendly labels are applied instead of the original numbering of unique roles.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">user_roles_n_eg &lt;-<span class="st"> </span>collaborator<span class="op">::</span>example_user_roles_n_eg</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">user_roles_n_eg <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">role =</span> <span class="kw">factor</span>(role,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">                       <span class="dt">levels=</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(user_roles_n_eg)),</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">                       <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;administrator&quot;</span>, <span class="st">&quot;committee&quot;</span>, <span class="st">&quot;collaborator&quot;</span>, <span class="st">&quot;validator&quot;</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">role =</span> <span class="kw">as.character</span>(role)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">role</th>
<th align="left">username</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">administrator</td>
<td align="left">f_almond</td>
</tr>
<tr class="even">
<td align="left">committee</td>
<td align="left">k_ashton</td>
</tr>
<tr class="odd">
<td align="left">collaborator</td>
<td align="left">a_barker</td>
</tr>
<tr class="even">
<td align="left">validator</td>
<td align="left">a_carlson</td>
</tr>
</tbody>
</table>
</div>
<div id="usage-of-user_roles" class="section level3">
<h3>Usage of <code>user_roles()</code></h3>
<p>Use <code>user_roles()</code> to apply named roles to all users according to example users with those rights. E.g. In the example above, everyone with the same user rights as the example collaborator “a_barker” will be assigned the “collaborator” role.</p>
<p>This allows further analyses to be done using roles which are not currently possible within REDCap (e.g. tables, plots, etc), and can be used to subsequently automatically upload and allocate user rights (see <a href="https://github.com/kamclean/collaborator/blob/master/vignettes/vignette_user_2_assign.Rmd">Redcap User Management: 2. Assign User Rights</a>)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">user_roles_full &lt;-<span class="st"> </span>collaborator<span class="op">::</span>example_user_roles_full</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">table</span>(user_roles_full<span class="op">$</span>role) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Var1</th>
<th align="right">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">administrator</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">collaborator</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">committee</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">validator</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="user_validate" class="section level2">
<h2>3. user_validate()</h2>
<p>Use <code>user_validate()</code> to explore the rights of current users, and identify signficant errors in assignment of user rights. This is a useful tool whether user rights are allocated manually, or <a href="https://github.com/kamclean/collaborator/blob/master/vignettes/vignette_user_2_assign.Rmd">automatically</a>.</p>
<p>The output from <code>user_validate()</code> is 3 nested dataframes:</p>
<div id="forms_na" class="section level3">
<h3>1. <code>$forms_na</code></h3>
<p>The unallocation of form rights is a possible error during automatic assignment of user rights. <strong>In this case these users will have view and edit rights to all forms (within their DAG) on the REDCap project</strong>.</p>
<ul>
<li><p>The <code>$forms_na</code> output will highlight the individual users currently on REDCap with NA recorded for their form rights (e.g. ability to access data collection instruments).</p></li>
<li><p>This can occur in the specific circumstance where REDCap user “role names” are being used, and the name of a data collection instrument is changed <strong>after</strong> the “role name” is created but <strong>without</strong> editing and saving the existing user role on REDCap. Once this role is comfirmed with the changed names of the forms, this error should disappear.</p></li>
</ul>
</div>
<div id="dag_unallocated" class="section level3">
<h3>2. <code>$dag_unallocated</code></h3>
<p>The unallocation of data access groups is a common error during manual assignment of user rights. <strong>In this case these users will be able to access all records (within their form rights) in the REDCap project</strong>.</p>
<ul>
<li><p>The <code>$dag_unallocated</code> output will highlight the individual users currently on REDCap with NA recorded for their DAG.</p></li>
<li><p>However, not all unallocated DAGS are “incorrect” - some users (e.g. administrators) may require to view any records on the project. It is recommended that in this case these users are excluded using <code>users_exception</code>.</p></li>
</ul>
</div>
<div id="dag_incorrect" class="section level3">
<h3>3. <code>$dag_incorrect</code></h3>
<p>The incorrect allocation of data access groups is a common error during manual assignment of user rights. <strong>In this case these users will have access to and be able to upload records within another DAG in the REDCap project</strong>.</p>
<ul>
<li><p>This uses the <code>users.df</code> input (which must contain at least 2 columns: <code>username</code> and <code>data_access_group</code>) and compares this to the current users on REDCap.</p></li>
<li><p>The <code>$dag_incorrect</code> output will highlight the individual users with discrepancies in the DAGs recorded so that these can be corrected.</p></li>
<li><p>However, not all discrepancies are “incorrect” - some users may be particpating within multiple DAGs and so will be highlighted. It is recommended that in this case these users are either excluded using <code>users_exception</code> or have separate usernames created for each DAG (recommended).</p></li>
</ul>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
